import fs from "fs";
import path from "path";

// Helper function to escape special regex characters
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
}

function replaceInFile(file, replacements) {
  let content = fs.readFileSync(file, "utf8");
  for (const [from, to] of Object.entries(replacements)) {
    // Use the escapeRegExp function for robustness
    content = content.replace(new RegExp(escapeRegExp(from), "g"), to);
  }
  fs.writeFileSync(file, content);
}

replaceInFile("src/backend/browser/browserConfig.ts", {
  "マイグレーション処理が必要です。": "Bro的开发需要升级💀",
  "設定ファイルが見つかりません": "找不到配置文件"
});

replaceInFile("src/backend/browser/fileImpl.ts", {
  "フォルダへのアクセス許可がありません。アクセスしようとしたフォルダ名:": "访问无权限:",
  "フォルダへのアクセス許可がありません。ファイルの読み書きのためにアクセス許可が必要です。":
    "文件夹访问无权限，但是需要权限来读取和写入文件",
  "疑似パスではありません:": "此路径是绝对路径：",
  "ファイルが見つかりません:": "找不到文件:"
});

replaceInFile("src/backend/common/ConfigManager.ts", {
  "一つだけ書き出し":"只选择一个导出声音",
  "選択音声を書き出し":"选择并导出声音",
  "プロジェクト読み込み":"项目加载",
  "プロジェクトを読み込む":"加载项目",
  "テキスト読み込む":"文本加载",
  "テキストを読み込む":"加载文本"
});

// 移除了多余的逗号
replaceInFile("src/components/Menu/MenuBar/MenuBar.vue", {
  "ファイル": "档案",
  "編集": "编辑",
  "表示": "显示",
  "エンジン": "引擎",
  "設定": "设置",
  "ヘルプ": "帮助"
});

replaceInFile("src/components/Menu/MenuBar/MinMaxCloseButtons.vue", {
  "閉じる": "关闭",
  "最小化": "最大化",
  "最大化": "最小化"
});

// 移除了多余的逗号
replaceInFile("src/components/Menu/MenuBar/TitleBarButtons.vue", {
  "最前面固定を解除": "解除前方锁定",
  "最前面に固定": "固定前方"
});

// 移除了多余的逗号
replaceInFile("src/components/Menu/MenuBar/TitleBarEditorSwitcher.vue", {
  "トーク": "对话模式",
  "ソング": "歌曲模式"
});

replaceInFile("src/components/Menu/MenuBar/useCommonMenuBarData.ts", {
  "最近使ったプロジェクトはありません": "没有最近使用过的项目",
  "新規プロジェクト": "新项目",
  "プロジェクトを上書き保存": "保存并覆盖项目",
  "プロジェクトを名前を付けて保存": "命名并保存项目",
  "プロジェクトの複製を保存": "保存项目副本",
  "プロジェクトを読み込む": "加载项目",
  "全画面表示を切り替え":"全屏显示",
  "拡大":"放大",
  "縮小":"缩小",
  "放大率のリセット":"重置放大率",
  "最近使ったプロジェクト":"最近使用的项目",
  "元に戻す":"恢复",
  "やり直す":"重新开始",
  "すべて選択":"全选",
  "キー割り当て":"热键分配",
  "ツールバーのカスタマイズ":"自定义工具栏",
  "キャラクター＆スタイルの管理":"管理角色和风格",
  "キャラクター並び替え・試聴":"角色排序/试听",
  "デフォルトスタイル":"默认样式",
  "読み方＆アクセント辞書":"读法和重音词典",
  "オプション":"选项"
});

replaceInFile("src/components/Menu/MenuButton.vue", {
  "最近使ったプロジェクトはありません": "没有最近使用过的项目",
  "新規プロジェクト": "新项目",
  "プロジェクトを上書き保存": "保存并覆盖项目",
  "プロジェクトを名前を付けて保存": "命名并保存项目",
  "プロジェクトの複製を保存": "保存项目副本",
  "プロジェクトを読み込む": "加载项目",
  "全画面表示を切り替え":"全屏显示",
  "拡大":"放大",
  "縮小":"缩小",
  "拡大率のリセット":"重置放大率",
  "最近使ったプロジェクト":"最近使用的项目",
  "元に戻す":"恢复",
  "やり直す":"重新开始",
  "すべて選択":"全选",
  "キー割り当て":"热键分配",
  "ツールバーのカスタマイズ":"自定义工具栏",
  "キャラクター＆スタイルの管理":"管理角色和风格",
  "キャラクター並び替え・試聴":"角色排序/试听",
  "デフォルトスタイル":"默认样式",
  "読み方＆アクセント辞書":"读法和重音词典",
  "オプション":"选项"
});

replaceInFile("src/domain/hotkeyAction.ts", {
  "最近使ったプロジェクトはありません": "没有最近使用过的项目",
  "新規プロジェクト": "新项目",
  "プロジェクトを上書き保存": "保存并覆盖项目",
  "プロジェクトを名前を付けて保存": "命名并保存项目",
  "プロジェクトの複製を保存": "保存项目副本",
  "プロジェクトを読み込む": "加载项目",
  "全画面表示を切り替え": "全屏显示",
  "拡大": "放大",
  "縮小": "缩小",
  "拡大率のリセット": "重置放大率",
  "最近使ったプロジェクト": "最近使用的项目",
  "元に戻す": "恢复",
  "やり直す": "重新开始",
  "すべて選択": "全选",
  "キー割り当て": "热键分配",
  "ツールバーのカスタマイズ": "自定义工具栏",
  "キャラクター＆スタイルの管理": "管理角色和风格",
  "キャラクター並び替え・試聴": "角色排序/试听",
  "デフォルトスタイル": "默认样式",
  "読み方＆アクセント辞書": "读法和重音词典",
  "オプション": "选项",
  "音声書き出し": "语音导出",
  "選択音声を書き出し": "选择并导出声音",
  "音声を繋げて書き出し": "剪辑并导出声音",
  "再生/停止": "播放/停止",
  "連続再生/停止": "连续播放/停止",
  "ｱｸｾﾝﾄ欄を表示": "显示重音栏",
  "ｲﾝﾄﾈｰｼｮﾝ欄を表示": "显示语调字段",
  "長さ欄を表示": "显示长度栏",
  "テキスト欄を追加": "添加文本栏",
  "テキスト欄を複製": "复制文本字段",
  "テキスト欄を削除": "删除文本字段",
  "テキスト欄からフォーカスを外す": "从文本字段移出焦点",
  "テキスト欄にフォーカスを戻す": "重新聚焦文本字段",
  "全体のイントネーションをリセット": "重置语调",
  "選択中のアクセント句のイントネーションをリセット": "重置所选重音短语语调",
  "コピー": "复制",
  "切り取り": "剪切",
  "貼り付け": "粘贴",
  "選択解除": "取消选择",
});

replaceInFile("src/components/Sing/ScoreSequencer.vue", {
  "コピー": "复制",
  "切り取り": "剪切",
  "貼り付け": "粘贴",
  "すべて選択" :"全选",
});

replaceInFile("src/components/Sing/ToolBar/ToolBar.vue", {
  "元に戻す": "恢复",
  "やり直す": "重新开始",
  "再生/停止": "播放/停止",
});

replaceInFile("src/components/Talk/AudioDetail.vue", {
  "ｱｸｾﾝﾄ欄を表示": "显示重音栏",
  "ｲﾝﾄﾈｰｼｮﾝ欄を表示": "显示语调字段",
  "再生/停止": "播放/停止",
  "長さ欄を表示" :"显示长度栏",
  "全体のイントネーションをリセット" : "重置语调",
  "選択中のアクセント句のイントネーションをリセット": "重置所选重音短语语调",
});

replaceInFile("tests/unit/lib/hotkeyManager.spec.ts", {
  "音声書き出し": "语音导出",
});

replaceInFile("src/components/Talk/ToolBar.vue", {
  "連続再生/停止": "连续播放/停止",
  "やり直す": "重新开始",
  "元に戻す": "恢复",
});

replaceInFile("src/components/Talk/TalkEditor.vue", {
  "音声書き出し": "语音导出",
  "選択音声を書き出し": "选择并导出声音",
  "音声を繋げて書き出し": "剪辑并导出声音",
  "テキスト欄にフォーカスを戻す" :"重新聚焦文本字段",
  "テキストを読み込む": "加载文本",
  "テキスト欄を複製" : "复制文本字段",
  "テキスト欄を追加": "添加文本栏",
  "テキスト欄を削除": "删除文本字段",
  "テキスト欄からフォーカスを外す": "从文本字段移出焦点",
  "すべて選択": "全选",
  "元に戻す": "恢复",
  "やり直す": "重新开始",
  "連続再生/停止": "连续播放/停止",
});

replaceInFile("src/components/Sing/ChangeValueDialog/CommonDialog.vue", {
  "キャンセル": "取消",
  "変更する": "更改",
  "追加する": "添加",
});

replaceInFile("src/components/Sing/ChangeValueDialog/TempoChangeDialog.stories.ts", {
  "開いている：追加": "已打开：添加",
  "開いている：変更": "已打开：更改",
  "OKボタンを押す：追加": "点击确定按钮以添加",
  "テンポ": "节奏",
  "/追加する/": "/添加/",
  "OKボタンを押す：編集": "点击确定按钮以编辑",
  "/変更する/": "/更改/",
  "キャンセルボタンを押す": "点击取消按钮放弃所做的一切",
  "/キャンセル/": "/取消/",
  "閉じている": "关闭",
});

replaceInFile("src/components/Sing/ChangeValueDialog/TempoChangeDialog.vue", {
  "テンポの追加": "取消",
  "テンポの編集": "更改",
  "テンポ": "节奏"
});

replaceInFile("src/components/Sing/ChangeValueDialog/TimeSignatureChangeDialog.stories.ts", {
  "開いている：追加": "已打开：添加",
  "開いている：変更": "已打开：更改",
  "OKボタンを押す：追加": "点击确定按钮以添加",
  "拍子の分子": "小节拍数量",
  "/追加する/": "/添加/",
  "/変更する/": "/更改/",
  "OKボタンを押す：編集": "点击确定按钮以编辑",
  "拍子の分母": "单位拍音符时值",
  "キャンセルボタンを押す": "点击取消按钮放弃所做的一切",
  "/キャンセル/": "/取消/",
  "閉じている": "关闭"
});

replaceInFile("src/components/Sing/ChangeValueDialog/TimeSignatureChangeDialog.vue", {
  "拍子の追加": "添加拍",
  "拍子の編集": "修改拍",
  "拍子の分子": "小节拍数量",
  "拍子の分母": "单位拍音符时值"
});

replaceInFile("src/components/Sing/SequencerGrid/index.stories.ts", {
  "デフォルト": "默认",
  "拍子変化": "拍号变化"
})

replaceInFile("src/components/Sing/SequencerRuler/LoopLane/index.stories.ts", {
  "デフォルト": "默认",
  "無効状態": "禁用状态",
  "空の状態": "空状态",
  "ドラッグ中(有効)": "拖动中（启用）",
  "ドラッグ中(無効)": "拖动中（禁用）",
  "長いループ範囲": "长循环范围",
  "短いループ範囲": "短循环范围"
});

replaceInFile("src/components/Sing/SequencerRuler/index.stories.ts", {
  "デフォルト": "默认",
  "テンポ変化": "速度变化",
  "拍子変化": "拍号变化",
  "スクロール": "滚动",
  "再生位置を移動": "移动播放位置"
});

replaceInFile("src/components/Sing/SideBar/SideBar.vue", {
  "トラック一覧": "音轨列表",
  "トラックを削除": "删除音轨",
  "トラックを追加": "添加音轨",
  "すべてのソロを解除": "解除所有独奏"
});

replaceInFile("src/components/Sing/SideBar/TrackItem.vue", {
  "トラック追加": "添加音轨",
  "トラック削除": "删除音轨"
});

replaceInFile("src/components/Sing/ToolBar/EditTargetSwicher.vue", {
  "ノート編集": "音符编辑",
  "ピッチ編集": "音高编辑",
  "クリックで消去": "点击清除"
});

replaceInFile("src/components/Sing/ToolBar/ToolBar.vue", {
  "音域": "音域",
  "声量": "音量",
  "テンポ": "节奏",
  "拍子": "拍号"
});

replaceInFile("src/components/Sing/ExportOverlay.vue", {
  "レンダリング中・・・": "渲染中...",
  "を書き出し中・・・": "导出中...",
  "の書き出しをキャンセル": "取消导出",
  "音声": "音频",
  "labファイル": "lab文件"
});

replaceInFile("src/components/Sing/menuBarData.ts", {
  "音声書き出し": "语音导出",
  "labファイルを書き出し": "导出lab文件",
  "プロジェクトをインポート": "导入项目",
  "コピー": "复制",
  "切り取り": "剪切",
    "貼り付け": "粘贴",
  "すべて選択": "全选",
  "選択解除": "取消选择",
  "クオンタイズ": "量化",
  "立ち絵を非表示": "隐藏立绘",
  "立ち絵を表示": "显示立绘"
});

replaceInFile("src/components/Sing/PlayheadPositionDisplay.vue", {
  "トラック削除": "删除音轨",
  "小節.拍": "小节.拍"
});

replaceInFile("src/components/Sing/ScoreSequencer.vue", {
  "シーケンサ": "音序器",
  "コピー": "复制",
  "切り取り": "剪切",
  "貼り付け": "粘贴",
  "すべて選択" :"全选",
});

replaceInFile("src/components/Sing/SequencerNote.vue", {
  "ノートが重なっています": "音符重叠",
  "フレーズが生成できません。歌詞は日本語1文字までです。": "无法生成乐句。歌词最多只能是1个日文字符。",
  "コピー": "复制",
  "切り取り": "剪切",
  "クオンタイズ": "量化",
  "削除": "删除"
});

replaceInFile("src/components/Sing/SequencerToolPalette.vue", {
  "選択優先": "优先选择",
  "編集優先": "优先编辑",
  "ピッチ編集": "音高编辑",
  "ピッチ削除": "删除音高"
});

replaceInFile("src/components/Talk/AccentPhrase.vue", {
  "イ段とウ段以外の音は無声化できません": "除i行和u行以外的音无法清音化",
  "読みの変更はアクセント項目でのみ、": "读音的更改仅限于重音项，",
  "無声化はイントネーション項目でのみ操作できます": "清音化仅限于语调项操作",
  "番目のアクセント区間の読み": "第N个重音短语的读音",
  "削除": "删除",
  "ア": "啊"
});

replaceInFile("src/components/Talk/AudioCell.vue", {
  "文章が長いと正常に動作しない可能性があります。": "文章过长可能无法正常运行。",
  "句読点の位置で文章を分割してください。": "请在标点符号处分割文章。",
  "行目を削除": "删除行",
  "次に選択するaudioKeyが見付かりませんでした（unreachable）": "未找到下一个要选择的audioKey（无法到达）",
  "切り取り": "剪切",
  "コピー": "复制",
  "貼り付け": "粘贴",
  "全選択": "全选",
  "読みを変えずに適用": "不改变读音应用",
  "コンテキストメニューアイテムの取得に失敗しました。": "获取上下文菜单项失败。"
});

replaceInFile("src/components/Talk/AudioDetail.vue", {
  "ｱｸｾﾝﾄ": "重音",
  "ｲﾝﾄﾈｰｼｮﾝ": "语调",
  "長さ": "长度",
  "マウスホイールを使って": "使用鼠标滚轮",
  "スライダーを微調整できます。": "可以微调滑块。",
  "ホイール": "滚轮",
  "一括調整": "批量调整",
  "ｱｸｾﾝﾄ欄を表示": "显示重音栏",
  "ｲﾝﾄﾈｰｼｮﾝ欄を表示": "显示语调字段",
  "再生/停止": "播放/停止",
  "長さ欄を表示" :"显示长度栏",
  "全体のイントネーションをリセット" : "重置语调",
  "選択中のアクセント句のイントネーションをリセット": "重置所选重音短语语调",
});

replaceInFile("src/components/Talk/AudioInfo.vue", {
  "プリセット": "预设",
  "プリセット新規登録": "注册新预设",
  "プリセット管理": "预设管理",
  "プリセットはありません": "没有预设",
  "再登録": "重新注册",
  "登録": "注册",
  "プリセット登録": "预设注册",
  "タイトル": "标题",
  "キャンセル": "取消",
  "確定": "确定",
  "プリセットの再登録": "重新注册预设",
  "プリセットを再登録し、このプリセットが設定されたテキスト欄全てに再適用する": "重新注册预设，并将其重新应用于所有设置了该预设的文本框",
  "プリセットの再登録のみ行う": "仅重新注册预设",
  "モーフィング": "变形",
  "未設定": "未设置",
  "非対応エンジンです": "不支持的引擎",
  "無効な設定です": "无效设置",
  "割合": "比例",
  "話速": "语速",
  "抑揚": "抑扬",
  "音量": "音量",
  "間の長さ": "间隙长度",
  "開始無音": "起始静音",
  "終了無音": "结束静音",
  "プリセット解除": "解除预设",
  "プリセット選択": "选择预设"
});

replaceInFile("src/components/Talk/AudioParameter.vue", {
  "無声化した音にイントネーションは存在しません": "清音化的音没有语调",
  "テキストをクリックすることで無声化を解けます。": "点击文本可以解除清音化。"
})

replaceInFile("src/components/Talk/CharacterPortrait.vue", {
  "（表示エラー）": "（显示错误）"
})

replaceInFile("src/components/Talk/menuBarData.ts", {
  "音声書き出し": "语音导出",
  "選択音声を書き出し": "选择并导出声音",
  "音声を繋げて書き出し": "剪辑并导出声音",
  "テキストを繋げて書き出し": "连接文本并导出",
  "テキスト読み込み": "文本加载",
  "行番号を非表示": "隐藏行号",
  "行番号を表示": "显示行号"
});

replaceInFile("src/components/Talk/TalkEditor.vue", {
  "テキストを追加": "添加文本",
  "${defaultPort}番ポートが使用中であるため ${engineName} は、${altPort}番ポートで起動しました": "${engineName} 在 ${altPort} 端口上启动，因为端口 ${defaultPort} 正在使用",
  "対応していないファイルです": "不支持的文件",
  "テキストファイル (.txt) とVOICEVOXプロジェクトファイル (.vvproj) に対応しています。": "支持文本文件 (.txt) 和VOICEVOX项目文件 (.vvproj)。",
  "テキスト読み込み": "文本加载",
  "音声書き出し": "语音导出",
  "選択音声を書き出し": "选择并导出声音",
  "音声を繋げて書き出し": "剪辑并导出声音",
  "テキスト欄にフォーカスを戻す" :"重新聚焦文本字段",
  "テキストを読み込む": "加载文本",
  "テキスト欄を複製" : "复制文本字段",
  "テキスト欄を追加": "添加文本栏",
  "テキスト欄を削除": "删除文本字段",
  "テキスト欄からフォーカスを外す": "从文本字段移出焦点",
  "すべて選択": "全选",
  "元に戻す": "恢复",
  "やり直す": "重新开始",
  "連続再生/停止": "连续播放/停止",
});

replaceInFile("src/components/Talk/ToolBar.vue", {
  "再生に失敗しました": "播放失败",
  "エンジンの再起動をお試しください。": "请尝试重启引擎。",
  "連続再生/停止": "连续播放/停止",
  "やり直す": "重新开始",
  "元に戻す": "恢复",
});

replaceInFile("src/components/CharacterButton.vue", {
  "有効なスタイルが選択されていません": "",
  "選択可能なスタイルがありません": "",
  "選択解除": "",
  "キャラクター未選択": "",
});

replaceInFile("src/components/EngineStartupOverlay.vue", {
  "エンジン起動中・・・": "",
  "データ準備中・・・": "",
  "エンジン起動に時間がかかっています。": "",
  "マルチエンジンをオフにして再読み込みする": "",
  "エンジンの起動に失敗しました。エンジンの再起動をお試しください。": "",
});

